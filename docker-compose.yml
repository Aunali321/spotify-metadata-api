services:
  metadata-api:
    image: ghcr.io/aunali321/music-metadata-api:latest
    # build: .  # Uncomment to build locally instead
    container_name: metadata-api
    restart: unless-stopped
    ports:
      - "8080:8080"
    volumes:
      # Mount directory containing your SQLite databases
      - /path/to/your/databases:/data:ro
    command: -db /data/main_database.sqlite3 -addr :8080
    environment:
      # Optional: Configure logging level
      - LOG_LEVEL=info
    healthcheck:
      test:
        [
          "CMD",
          "wget",
          "--quiet",
          "--tries=1",
          "--spider",
          "http://localhost:8080/health",
        ]
      interval: 30s
      timeout: 10s
      retries: 3
      start_period: 10s
